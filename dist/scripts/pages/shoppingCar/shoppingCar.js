"use strict";require(["../../static/conf/config.js"],function(){require(["jquery","template"],function(c){var e=JSON.parse(localStorage.getItem("goodCar")),t=template("goodCarList",e);if(c(".table_main").html(t),c(".car_logo a").attr("href","http://localhost:9999/pages/home/index.html"),localStorage.getItem("goodCar")){var n=JSON.parse(localStorage.getItem("goodCar")).length;c(".goods_car_count").text("购物车("+n+"件)"),c(".minus").on("click",function(){var t=c(this).siblings(".p_code").val(),e=JSON.parse(localStorage.getItem("goodCar")),n=e.findIndex(function(e){return e.p_code==t});0==--e[n].p_count&&(e.splice(n,1),c(this).parent().parent().remove());c(this).siblings(".p_count").val(c(this).siblings(".p_count").val()-1);c(this).parent().siblings(".goods_money").text("￥"+c(this).parent().siblings(".goods_unitPrice").text()*c(this).siblings(".p_count").val()),localStorage.setItem("goodCar",JSON.stringify(e)),c(this).parent().siblings(".goods_choose").children().children("input:checked")&&(c(".totalCost").text(0),o())}),c(".add").on("click",function(){var t=c(this).siblings(".p_code").val(),e=JSON.parse(localStorage.getItem("goodCar")),n=e.findIndex(function(e){return e.p_code==t});++e[n].p_count;c(this).siblings(".p_count").val(parseInt(c(this).siblings(".p_count").val())+1);c(this).parent().siblings(".goods_money").text("￥"+c(this).parent().siblings(".goods_unitPrice").text()*c(this).siblings(".p_count").val()),localStorage.setItem("goodCar",JSON.stringify(e)),c(this).parent().siblings(".goods_choose").children().children("input:checked")&&(c(".totalCost").text(0),o())}),c(".remove").on("click",function(){c(this).parent().parent().remove();var t=c(".good_count .p_code").val(),e=JSON.parse(localStorage.getItem("goodCar")),n=e.findIndex(function(e){return e.p_code==t});if(e.splice(n,1),localStorage.setItem("goodCar",JSON.stringify(e)),c(this).parent().siblings(".goods_choose").children().children("input:checked")){var o=c(".totalCost").text()-c(this).parent().siblings(".goods_money").text().substr(1,c(this).parent().siblings(".goods_money").text().length);c(".totalCost").text(o)}})}else c(".goods_car_count").text("购物车(0件)");function o(){var t=0;c(".goods_money").each(function(){if(c(this).siblings(".goods_choose").children().children("input").prop("checked")){var e=c(this).text();t+=Number(e.substr(1,e.length))}c(".totalCost").text(t)})}c(".checkAll").click(function(){c(".totalCost").text(0),c("input[type='checkbox']").each(function(e){c("input[type='checkbox']").eq(e).parent().parent().css("background","url(../../styles/pages/img/no_choose_icon.png) no-repeat center center")}),c(".checkInput").prop("checked",c(this).prop("checked")),c("input:checked").each(function(e){c("input:checked").eq(e).parent().parent().css("background","url(../../styles/pages/img/choose_icon.png) no-repeat center center")}),c("input:checked").length?c(".selected").text(c("input:checked").length-1):c(".selected").text(0),c("input:checked:gt(0)").each(function(e){var t=c("input:checked:gt(0)").eq(e).parent().parent().parent().children(".goods_money").text();c(".totalCost").text(parseInt(c(".totalCost").text())+parseInt(t.substr(1,t.length)))})}),c(".checkInput").click(function(){c(".totalCost").text(0),c("input[type='checkbox']").each(function(e){c("input[type='checkbox']").eq(e).parent().parent().css("background","url(../../styles/pages/img/no_choose_icon.png) no-repeat center center")}),c(this).prop("checked")?c("input:checked").length>=c(".checkInput").length&&c(".checkAll").prop("checked",!0):c(".checkAll").prop("checked",!1),c("input:checked").each(function(e){c("input:checked").eq(e).parent().parent().css("background","url(../../styles/pages/img/choose_icon.png) no-repeat center center")}),c(".checkAll").prop("checked")?(c(".selected").text(c("input:checked").length-1),c("input:checked:gt(0)").each(function(e){var t=c("input:checked:gt(0)").eq(e).parent().parent().parent().children(".goods_money").text();c(".totalCost").text(parseInt(c(".totalCost").text())+parseInt(t.substr(1,t.length)))})):(c(".selected").text(c("input:checked").length),c("input:checked").each(function(e){var t=c("input:checked").eq(e).parent().parent().parent().children(".goods_money").text();c(".totalCost").text(parseInt(c(".totalCost").text())+parseInt(t.substr(1,t.length)))}))}),c(".choose_delete").click(function(){c(".checkAll").prop("checked")?c("input:checked:gt(0)").each(function(e){c(this).parent().parent().parent().remove();var t=c("input:checked:gt(0)").eq(e).parent().parent().parent().children(".good_count").children("p_code").val(),n=JSON.parse(localStorage.getItem("goodCar")),o=n.findIndex(function(e){return e.p_code==t});n.splice(o,1),localStorage.setItem("goodCar",JSON.stringify(n)),c(".picAll").css("background","url(../../styles/pages/img/no_choose_icon.png) no-repeat center center")}):c("input:checked").each(function(e){c(this).parent().parent().parent().remove();var t=c("input:checked:gt(0)").eq(e).parent().parent().parent().children(".good_count").children("p_code").val(),n=JSON.parse(localStorage.getItem("goodCar")),o=n.findIndex(function(e){return e.p_code==t});n.splice(o,1),localStorage.setItem("goodCar",JSON.stringify(n)),c(".picAll").css("background","url(../../styles/pages/img/no_choose_icon.png) no-repeat center center")})})})});