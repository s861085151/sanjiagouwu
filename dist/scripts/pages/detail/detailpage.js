"use strict";require(["../../static/conf/config.js"],function(){require(["jquery","template","header"],function(a){a(".list_pic img").on("mouseover",function(){var t=a(this).attr("src");a(".middlePic").attr("src",t),a(".bigPic").attr("src",t)});var n=a(".glass"),t=a(".bigPicbox"),s=a(".picture"),c=a(".bigPic");n.width(s.width()/c.width()*t.width()),n.height(s.height()/c.height()*t.height()),s.hover(function(){n.show(),a(".bigPicbox").show()},function(){n.hide(),a(".bigPicbox").hide()}),s.on("mousemove",function(t){var e=t.pageX-s.offset().left-n.width()/2,o=t.pageY-s.offset().top-n.height()/2;e=Math.min(Math.max(0,e),s.width()-n.width()),o=Math.min(Math.max(0,o),s.height()-n.height()),n.css({left:e,top:o});var i=c.width()/s.width();c.css({left:-i*e,top:-i*o})}),a.ajax({type:"get",dataType:"json",url:"http://localhost:8000/foodhealth",success:function(t){var e=template("similarGoods",t);a("#similar_goods").html(e)}});var e=a("#fixed").offset().top+188;a(window).on("scroll",function(){a(window).scrollTop()>=e?(a("#fixed").addClass("fixed"),a(".price").show(),a(".car").show()):(a("#fixed").removeClass("fixed"),a(".price").hide(),a(".car").hide())});var o=1;a(".show_hide").on("click",function(){(o*=-1)<0?(a(".detail_list").css({height:85,overflow:"hidden"}),a(".show_hide i").text("向下展开"),a(".show_hide span").removeClass("icon-fanhuidingbu01").addClass("icon-fanhuidingbu-copy")):(a(".detail_list").css({height:"auto",overflow:"visible"}),a(".show_hide i").text("向上收起"),a(".show_hide span").removeClass("icon-fanhuidingbu-copy").addClass("icon-fanhuidingbu01"))});for(var i=function(o){a.ajax({type:"get",dataType:"json",url:"http://localhost:8000/userComment"+(o+1),success:function(t){var e=template("user_comment"+(o+1),t);a(".userReview").eq(o).html(e),a(".user_picture .minImg").each(function(e){a(this).on("click",function(){a(".maxImg").eq(e).show()}),a(".user_picture .minImg img").on("click",function(){var t=a(this).attr("src");console.log(t),a(".maxImg").eq(e-1).attr("src",t)})}),a(".pNum").each(function(t){a(this).on("click",function(){a(this).addClass("active").siblings().removeClass("active"),a(".userReview").eq(t).show().siblings(".userReview").hide()})})}})},r=0;r<a(".userReview").length;r++)i(r);console.log(a(".minus")),a(".minus").on("click",function(){console.log(1),1<a(".countadd input").val()?a(".countadd input").val(parseInt(a(".countadd input").val())-1):a(".countadd input").val(1)}),a(".add").on("click",function(){a(".countadd input").val(parseInt(a(".countadd input").val())+1)}),a(".detailRight").on("click",function(t){var e=[];if("add_car"==(t.target||t.srcElement).className){var o={p_name:a(".p_name").text(),p_price:a(".targetLeft .number .money").text(),p_code:a(".p_code span").text(),p_img:a(".car_img").attr("src"),p_count:a(".countadd input").val()},i=window.localStorage.getItem("goodCar"),n=(e=i?JSON.parse(i):[]).find(function(t){return t.p_code==o.p_code});n?1==n.p_count?n.p_count++:n.p_count+=parseInt(o.p_count):e.push(o),localStorage.setItem("goodCar",JSON.stringify(e))}});var d=function(t){var e=document.location.toString().split("?");if(1<e.length){for(var o,i=e[1].split("&"),n=0;n<i.length;n++)if(null!=(o=i[n].split("="))&&o[0]==t)return o[1];return""}return""}("itemCode"),l=JSON.parse(localStorage.getItem("newgoods_data"));for(var r in l)if(d==l[r].sitemCode){var h=l[r].sitemCode.substr(l[r].sitemCode.length-2,l[r].sitemCode.length);console.log(h),a(".classify1").text(l[r].wlgroupName),a(".classify2").text(l[r].wmgroupName),a(".p_name").text(l[r].itemName),a(".p_code span").text(l[r].sitemCode),a(".money").text(l[r].rsalePrice),a(".picture img").attr("src","https://image.ttcj.tv/item_images/"+h+"/"+d+"M1.jpg"),a(".bigPicbox img").attr("src","https://image.ttcj.tv/item_images/"+h+"/"+d+"M1.jpg")}a(window).scroll(function(){a(".content_header_nav li").removeClass("active"),a(window).scrollTop()>=a(".goods_content_text").offset().top&&a(window).scrollTop()<a(".goods_content_video").offset().top&&a(".content_header_nav li").eq(1).addClass("active"),a(window).scrollTop()>=a(".goods_content_video").offset().top&&a(window).scrollTop()<a(".goods_evaluate").offset().top&&a(".content_header_nav li").eq(0).addClass("active"),a(window).scrollTop()>=a(".goods_evaluate").offset().top&&a(".content_header_nav li").eq(2).addClass("active")}),a(".content_header").children().children(".price").text(a(".rmb").text()+a(".money").text())})});