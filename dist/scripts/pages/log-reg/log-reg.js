"use strict";require(["../../static/conf/config.js"],function(){require(["jquery","jq.cookie"],function(p){p(function(){p("#click_tap").children().each(function(a){var n=this;p(this).on("click",function(){p(n).addClass("hover").siblings().removeClass("hover"),0==a?(p(".log_input").css("display","block"),p(".reg_input").css("display","none")):(p(".reg_input").css("display","block"),p(".log_input").css("display","none"))})});var o=v(),a=1;p(".eyes").on("click",function(){-1==(a*=-1)&&(p(".eyes").addClass("icon-xianshimima").removeClass("icon-ziyuan"),p(".pwd_log_input").attr("type","text")),1==a&&(p(".eyes").addClass("icon-ziyuan").removeClass("icon-xianshimima"),p(".pwd_log_input").attr("type","password"))});var t=p("#user_log_input"),e=p("#pwd_log_input"),n=p("#login-btn"),r=p("#phone_reg_input"),l=p("#pwd_reg_input"),i=p("#code_reg_input"),s=p("#login_btn");n.on("click",function(){if(""==t.val()||""==e.val())alert("输入用户名或密码");else for(var a=JSON.parse(localStorage.getItem("userdata")),n=0;n<a.length;n++){if(t.val()==a[n].username&&e.val()==a[n].password){alert("登陆成功"),window.location.assign("http://localhost:9999/pages/home/index.html");break}alert("用户名或者密码错误");break}}),r.on("blur",function(){0==/^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/.test(r.val())&&""!=r.val()?p(".phone_reg").css("display","block"):p(".phone_reg").css("display","none")}),r.on("input",function(){""==r.val()&&p(".phone_reg").css("display","none")});var c=1;p("#checkInput").on("click",function(){(c*=-1)<0?p(".error").show():p(".error").hide()});var u=[];function d(){r.val(""),l.val(""),i.val("")}function v(){var a=[];h(a),p("#canvas").on("click",function(){h(a)});var n=a.join("");return console.log(n),n}function h(a){var n=p("#canvas").width(),o=p("#canvas").height(),t=document.getElementById("canvas"),e=t.getContext("2d");t.width=n,t.height=o;for(var r="A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0".split(","),l=r.length,i=0;i<=3;i++){var s=Math.floor(Math.random()*l),c=30*Math.random()*Math.PI/180,u=r[s];a[i]=u.toLowerCase();var d=10+20*i,v=20+8*Math.random();e.font="bold 23px 微软雅黑",e.translate(d,v),e.rotate(c),e.fillStyle=g(),e.fillText(u,0,0),e.rotate(-c),e.translate(-d,-v)}for(i=0;i<=5;i++)e.strokeStyle=g(),e.beginPath(),e.moveTo(Math.random()*n,Math.random()*o),e.lineTo(Math.random()*n,Math.random()*o),e.stroke();for(i=0;i<=30;i++){e.strokeStyle=g(),e.beginPath();d=Math.random()*n,v=Math.random()*o;e.moveTo(d,v),e.lineTo(d+1,v+1),e.stroke()}}function g(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}"none"==p(".error").css("display")&&s.on("click",function(){if(1==function(){if(function(){{if(""==r.val())return alert("用户名不能为空"),!1;if(""==l.val())return alert("密码不能为空"),!1;if(""==i.val())return alert("验证码不能为空"),!1}return!0}())return"block"==p(".phone_reg").css("display")?(alert("用户名格式错误"),d(),!1):l.val().length<8?(alert("密码长度错误"),d(),!1):i.val()==o||(console.log(i.val(),o),alert("验证码错误，请重新输入"),d(),!1)}()){var n={username:r.val(),password:l.val()},a=window.localStorage.getItem("userdata");(u=a?JSON.parse(a):[]).find(function(a){return a.username==n.username})||(u.push(n),localStorage.setItem("userdata",JSON.stringify(u))),alert("注册成功，快去登录吧！！！"),window.location.assign("http://localhost:9999/pages/home/index.html")}o=v()}),t.on("input",function(){""!=t.val()&&e.val(),n.css("background","#BABABA")}),e.on("input",function(){""!=t.val()&&""!=e.val()?n.css("background","blue"):n.css("background","#BABABA")}),r.on("input",function(){""!=t.val()&&""!=e.val()&&i.val(),s.css("background","#BABABA")}),l.on("input",function(){""!=r.val()&&""!=l.val()&&""!=i.val()?s.css("background","blue"):s.css("background","#BABABA")}),i.on("input",function(){""!=r.val()&&""!=l.val()&&""!=i.val()?s.css("background","blue"):s.css("background","#BABABA")}),r.on("blur",function(){var a=JSON.parse(localStorage.getItem("userdata"));if(a)for(var n=0;n<a.length;n++)r.val()==a[n].username&&alert("该手机号已注册")})})})});